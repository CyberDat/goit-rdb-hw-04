# Звіт про виконання ДЗ №4: DDL, DML та складні SQL-запити

**Мета:** Проектування реляційної структури бази даних та поглиблений аналіз пов'язаних даних для прийняття аналітичних рішень.

---

## Частина 1: Проектування та наповнення (DDL/DML)

### 1.1 Структура бази даних "LibraryManagement"
База даних спроектована з дотриманням правил нормалізації та забезпеченням цілісності даних через зовнішні ключі (`FOREIGN KEY`).



* [cite_start]**authors**: Довідник авторів. [cite: 1, 2]
* [cite_start]**genres**: Довідник жанрів. [cite: 1, 2]
* [cite_start]**books**: Таблиця книг зі зв'язками «багато до одного» до авторів та жанрів. [cite: 1, 2]
* [cite_start]**users**: Реєстр користувачів бібліотеки. [cite: 1, 2]
* [cite_start]**borrowed_books**: Журнал видачі книг (сполучна таблиця для реалізації зв'язку М:М між книгами та користувачами). [cite: 1, 2]

### 1.2 Аналіз логів вставки (Incident Report)
На скріншоті `p_2f` зафіксовано помилку `Error Code: 1292. Incorrect date value`. 
* **Аналіз:** Спроба вставки року '1993' у колонку типу `DATE` була відхилена СУБД. 
* **Рішення:** Помилку виправлено шляхом приведення даних до коректного формату `YYYY-MM-DD`. Це демонструє важливість валідації вхідних даних для захисту бази даних від некоректних записів.

---

## Частина 2: Складні SQL-запити (Аналітика)

### 2.1 Об'єднання 8 таблиць
[cite_start]Для формування повної звітності було реалізовано запит з використанням 7 операторів `INNER JOIN`. [cite: 1, 2] [cite_start]Базова кількість рядків у результаті: **518**. [cite: 2]

### 2.2 Вплив типу JOIN на результат
**Питання:** Що відбувається при зміні `INNER` на `LEFT/RIGHT`?  
[cite_start]**Відповідь:** * При використанні `INNER JOIN` ми отримуємо лише ті записи, де є повний збіг у всіх пов'язаних таблицях. [cite: 2]
* [cite_start]При використанні `LEFT JOIN` (наприклад, до таблиці співробітників), якби існував співробітник без жодного оформленого замовлення, кількість рядків у вибірці збільшилася б за рахунок виведення даних цього співробітника з `NULL` значеннями в полях замовлення. [cite: 2]
* [cite_start]У поточному наборі даних (скріншот `p_4_2`) кількість рядків залишилася **518**, що свідчить про високу цілісність даних у базі `hw3` — кожен запис має свого коректного контрагента. [cite: 2]

### 2.3 Агрегація та фільтрація
[cite_start]На основі вибірки за співробітниками (ID > 3 та ≤ 10) проведено групування за категоріями товарів: [cite: 2]

| Назва категорії | Середня кількість (AVG) | Всього рядків |
| :--- | :--- | :--- |
| Beverages | 25.1290 | 62 |
| Dairy Products | 27.4655 | 58 |
| Confections | 23.8627 | 51 |

[cite_start]**Фільтрація:** За допомогою оператора `HAVING avg_quantity > 21` було відсіяно категорії з низьким середнім обсягом товару в замовленнях. [cite: 2]

---

## Частина 3: Технічний стек
* **Database:** MySQL 8.0
* **IDE:** MySQL Workbench
* **Навички:** DDL/DML операції, складні JOIN-з'єднання, агрегація даних, пагінація (`LIMIT`/`OFFSET`).